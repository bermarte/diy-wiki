(this["webpackJsonpwiki-client"]=this["webpackJsonpwiki-client"]||[]).push([[0],{35:function(e,t,a){e.exports=a(49)},40:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),c=a.n(s),o=(a(40),a(5)),i=a(6),l=a(8),u=a(7),m=a(1),p=a(12),g=a(3),h=a.n(g),d=a(10),v=a(31),b=a.n(v),f=a(32),E=/#(\w+)/g;function k(e){var t=Object(f.sanitize)(b()(e));return t=t.replace(E,'<a class="tag" href="/tags/$1">#$1</a>')}var _=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={pageState:"loading"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._loadPage()}},{key:"componentDidUpdate",value:function(e){e.match.params.slug!==this.props.match.params.slug&&this._loadPage()}},{key:"_loadPage",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.slug,e.next=3,fetch("/api/page/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:(n=e.sent).status&&"ok"===n.status?(r=n.body,s=k(r),this.setState({pageState:"ok",body:r,html:s})):(c=n.message&&n.message,this.setState({pageState:"error",errorMessage:c}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.slug,t=this.state,a=t.pageState,n=t.html,s=t.errorMessage;return r.a.createElement("div",{className:"page"},"loading"===a&&r.a.createElement("div",{className:"container page__loading"},"Loading..."),"ok"===a&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"page__body",dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("div",{className:"page__actions"},r.a.createElement(m.b,{className:"btn",to:"/edit/".concat(e)},"Edit"))),"error"===a&&r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"page__error"},s),r.a.createElement("div",{className:"page__actions"},r.a.createElement(m.b,{className:"btn",to:"/edit/".concat(e)},"Create"))))}}]),a}(r.a.Component),y=a(19),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={pageState:"loading"},n._onChange=n._onChange.bind(Object(y.a)(n)),n._onSave=n._onSave.bind(Object(y.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.slug,e.next=3,fetch("/api/page/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:(n=e.sent).status&&"ok"===n.status?(r=n.body,s=k(r),this.setState({pageState:"ok",body:r,html:s})):(o=k(c="# Your New Page\n\nWrite whatever you like here."),this.setState({pageState:"ok",body:c,html:o}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onChange",value:function(e){var t=k(e);this.setState({body:e,html:t})}},{key:"_onSave",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.slug,a=this.state.body,e.next=4,fetch("/api/page/".concat(t),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({body:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).status&&"ok"===r.status&&this.props.history.push("/wiki/".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.params.slug,a=this.state,n=a.pageState,s=a.body,c=a.html,o=a.errorMessage;return r.a.createElement("div",{className:"page"},"loading"===n&&r.a.createElement("div",{className:"container page__loading"},"Loading..."),"ok"===n&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"editor"},r.a.createElement("textarea",{className:"editor__textarea",value:s,onChange:function(t){return e._onChange(t.target.value)}}),r.a.createElement("div",{className:"editor__preview",dangerouslySetInnerHTML:{__html:c}})),r.a.createElement("div",{className:"page__actions"},r.a.createElement("button",{className:"btn",onClick:this._onSave},"Save"),"or \xa0 ",r.a.createElement(m.b,{to:"/wiki/".concat(t)},"Cancel"))),"error"===n&&r.a.createElement("div",{className:"container page__error"},o))}}]),a}(r.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={pageState:"loading",pages:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/pages/all");case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent).status&&"ok"===a.status?(n=a.pages,this.setState({pageState:"ok",pages:n})):this.setState({pageState:"error",errorMessage:"Error when loading pages"});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.pageState,a=e.pages,n=e.errorMessage;return r.a.createElement("div",{className:"container page"},"ok"===t&&r.a.createElement("div",{className:"page__body"},r.a.createElement("h1",null," All Pages"),r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",null,r.a.createElement(m.b,{to:"/wiki/".concat(e)},e))})))),"error"===t&&r.a.createElement("p",{className:"page__error"},n))}}]),a}(r.a.Component),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={pageState:"loading",tags:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/tags/all");case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent).status&&"ok"===a.status?(n=a.tags,this.setState({pageState:"ok",tags:n})):this.setState({pageState:"error",errorMessage:"Error when loading tags"});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.pageState,a=e.tags,n=e.errorMessage;return r.a.createElement("div",{className:"container page"},"ok"===t&&r.a.createElement("div",{className:"page__body"},r.a.createElement("h1",null,"All Tags"),r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",null,r.a.createElement(m.b,{to:"/tags/".concat(e)},"#",e))})))),"error"===t&&r.a.createElement("p",{className:"page__error"},n))}}]),a}(r.a.Component),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={pageState:"loading",tag:null,pages:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.tag,e.next=3,fetch("/api/tags/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:(n=e.sent).status&&"ok"===n.status?(r=n.pages,console.log(n),this.setState({pageState:"ok",tag:t,pages:r})):this.setState({pageState:"error",errorMessage:"Error when loading tags"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.pageState,a=e.tag,n=e.pages,s=e.errorMessage;return console.log(this.state),r.a.createElement("div",{className:"container page"},"ok"===t&&r.a.createElement("div",{className:"page__body"},r.a.createElement("h1",null,"All pages with #",a),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",null,r.a.createElement(m.b,{to:"/wiki/".concat(e)},e))})))),"error"===t&&r.a.createElement("p",{className:"page__error"},s))}}]),a}(r.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("header",null,r.a.createElement("div",{className:"container header__container"},r.a.createElement("h1",{className:"header__title"},r.a.createElement("a",{href:"/wiki/home"},"Wiki")),r.a.createElement("nav",{className:"header__nav"},r.a.createElement(m.b,{to:"/wiki/home"},"Home"),r.a.createElement(m.b,{to:"/wiki/about"},"About")))),r.a.createElement("main",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/wiki/:slug",component:_}),r.a.createElement(p.b,{path:"/edit/:slug",component:j}),r.a.createElement(p.b,{path:"/all",component:w}),r.a.createElement(p.b,{path:"/tags/:tag",component:O}),r.a.createElement(p.b,{path:"/tags",component:S}),r.a.createElement(p.b,{path:"/"},r.a.createElement(p.a,{to:"/wiki/home"})))),r.a.createElement("footer",null,r.a.createElement("div",{className:"container footer__container"},r.a.createElement(m.b,{to:"/wiki/home"},"Home"),r.a.createElement(m.b,{to:"/wiki/about"},"About"),r.a.createElement(m.b,{to:"/all"},"All Pages"),r.a.createElement(m.b,{to:"/tags"},"All Tags"))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.c223e79e.chunk.js.map